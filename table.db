CREATE EXTENSION IF NOT EXISTS "uuid-ossp";

drop table if exists MEDIA_PARTNER CASCADE;
drop table if exists MEDIA_PARTNER_DETAIL CASCADE;
drop table if exists MEDIA_PARTNER_PACKAGE CASCADE;
drop table if exists MEDIA_PARTNER_SOCIAL_MEDIA CASCADE;
drop table if exists MEDIA_PARTNER_REVIEW CASCADE;

CREATE TABLE MEDIA_PARTNER (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    created_by VARCHAR(255),
    approved_by VARCHAR(255),
    logo_url VARCHAR(255),
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    value VARCHAR(255),
    last_updated TIMESTAMP DEFAULT current_timestamp,
    updated_by VARCHAR(255),
    created_at TIMESTAMP DEFAULT current_timestamp,
    field VARCHAR(255) NOT NULL,
    is_approved BOOLEAN DEFAULT false,
    is_active BOOLEAN DEFAULT true
);

CREATE TABLE MEDIA_PARTNER_PACKAGE (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    mp_id UUID NOT NULL,
	CONSTRAINT fk_mp
      FOREIGN KEY(mp_id) 
	  REFERENCES media_partner(id)
	  ON DELETE cascade,
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    price FLOAT NOT NULL
);

CREATE TABLE MEDIA_PARTNER_SOCIAL_MEDIA (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    mp_id UUID NOT NULL,
	CONSTRAINT fk_mp
      FOREIGN KEY(mp_id) 
	  REFERENCES media_partner(id)
	  ON DELETE cascade,
    social_media VARCHAR(255) NOT NULL,
    link VARCHAR(255) NOT NULL
);

CREATE TABLE MEDIA_PARTNER_REVIEW (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    mp_id UUID NOT NULL,
	CONSTRAINT fk_mp
      FOREIGN KEY(mp_id) 
	  REFERENCES media_partner(id)
	  ON DELETE cascade,
    user_id VARCHAR(255) NOT NULL,
    review VARCHAR(255),
    rating INTEGER
);

CREATE TABLE SPONSORSHIP (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    created_by VARCHAR(255),
    approved_by VARCHAR(255),
    logo_url VARCHAR(255),
    name VARCHAR(255) NOT NULL,
    description VARCHAR(255),
    value VARCHAR(255),
    last_updated TIMESTAMP DEFAULT current_timestamp,
    updated_by VARCHAR(255),
    created_at TIMESTAMP DEFAULT current_timestamp,
    field VARCHAR(255) NOT NULL,
    is_approved BOOLEAN DEFAULT false,
    is_active BOOLEAN DEFAULT true
);

CREATE TABLE SPONSORSHIP_SOCIAL_MEDIA (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    sp_id UUID NOT NULL,
	CONSTRAINT fk_sp
      FOREIGN KEY(sp_id) 
	  REFERENCES sponsorship(id)
	  ON DELETE cascade,
    social_media VARCHAR(255) NOT NULL,
    link VARCHAR(255) NOT NULL
);

CREATE TABLE SPONSORSHIP_REVIEW (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    sp_id UUID NOT NULL,
	CONSTRAINT fk_sp
      FOREIGN KEY(sp_id) 
	  REFERENCES sponsorship(id)
	  ON DELETE cascade,
    user_id VARCHAR(255) NOT NULL,
    review VARCHAR(255),
    rating INTEGER
);

drop table if exists CHAT_ROOM CASCADE;
drop table if exists CHAT_MESSAGE CASCADE;

CREATE TABLE CHAT_ROOM (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
	created_at TIMESTAMP DEFAULT current_timestamp,
    customer_id VARCHAR(255) NOT NULL,
    business_id VARCHAR(255) NOT NULL
);

CREATE TABLE CHAT_MESSAGE (
    id UUID DEFAULT uuid_generate_v4() PRIMARY KEY,
    created_at TIMESTAMP DEFAULT current_timestamp,
    room_id UUID NOT NULL,
    CONSTRAINT fk_room_id
        FOREIGN KEY(room_id) 
        REFERENCES CHAT_ROOM(id)
        ON DELETE cascade,
    user_id VARCHAR(255) NOT NULL,
    message VARCHAR(255) NOT NULL
);